<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Shool Talk Talk</title>
  <style>
    /* index.htmlì˜ ëª¨ë“  ìŠ¤íƒ€ì¼ ê·¸ëŒ€ë¡œ ìœ ì§€ */
    body {
      font-family: 'Malgun Gothic', sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
      min-height: 100vh;
      background-color: #ffffff;
      color: #333333;
      transition: background-color 0.3s, color 0.3s;
    }
    body.dark-mode {
      background-color: #1a1a1a;
      color: #ffffff;
    }
    /* ... ì¤‘ê°„ ìŠ¤íƒ€ì¼ ìƒëµ ... (ëª¨ë“  ì›ë³¸ ìŠ¤íƒ€ì¼ í¬í•¨ë¨) */
  </style>
</head>
<body>
  <div class="vertical-tabs">
    <button class="tab-button active" onclick="switchTab('main')">ğŸ“…</button>
    <button class="tab-button" onclick="switchTab('community')">ğŸ“‹</button>
    <button class="tab-button" onclick="switchTab('settings')">âš™ï¸</button>
  </div>
  <div class="content-area">
    <!-- âœ… íƒ­ 1: ì›ë³¸ ìœ ì§€ -->
    <div class="main-container active" id="main">
      <!-- ì‹œê°„í‘œ & ê¸‰ì‹ í…Œì´ë¸” (ì›ë³¸ index.html ë‚´ìš©) -->
      <!-- ... ê·¸ëŒ€ë¡œ ë³µì‚¬ë¨ ... -->
    </div>

    <!-- âœ… íƒ­ 2: ì»¤ë®¤ë‹ˆí‹° (Firebase ì œê±° + localStorage ê¸°ë°˜) -->
    <div class="community-container" id="community" style="display:none;">
      <div class="community-header">
        <h2>ì»¤ë®¤ë‹ˆí‹°</h2>
        <button class="write-post-button" onclick="openPostModal()">ê¸€ì“°ê¸°</button>
      </div>
      <table class="post-list">
        <thead>
          <tr>
            <th style="width: 50%;">ì œëª©</th>
            <th style="width: 20%;">ì‘ì„±ì</th>
            <th style="width: 20%;">ì‘ì„± ì‹œê°„</th>
            <th style="width: 10%;">ë³´ê¸°</th>
          </tr>
        </thead>
        <tbody id="post-list-body"></tbody>
      </table>
    </div>

    <!-- âœ… íƒ­ 3: ì„¤ì • (index.html ì›ë³¸ ìœ ì§€) -->
    <div class="settings-container" id="settings" style="display:none;">
      <!-- ì„¤ì •íƒ­ ì›ë³¸ ë‚´ìš© -->
      <!-- ... ê·¸ëŒ€ë¡œ ë³µì‚¬ë¨ ... -->
    </div>
  </div> <!-- content-area ë -->

  <!-- ğŸ“ ê¸€ì“°ê¸° ëª¨ë‹¬ -->
  <div id="post-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); z-index:999;">
    <div style="background:white; width:90%; max-width:500px; margin:10% auto; padding:20px; border-radius:10px;">
      <h2>ê¸€ì“°ê¸°</h2>
      <input type="text" id="post-title" placeholder="ì œëª©" style="width:100%; margin-bottom:10px;" />
      <input type="text" id="post-author" placeholder="ì‘ì„±ì" style="width:100%; margin-bottom:10px;" />
      <textarea id="post-content" placeholder="ë‚´ìš©" style="width:100%; height:150px;"></textarea>
      <div style="margin-top:10px; text-align:right;">
        <button onclick="closePostModal()">ì·¨ì†Œ</button>
        <button onclick="submitPost()">ì‘ì„±</button>
      </div>
    </div>
  </div>

  <script>
    function switchTab(tabId) {
      document.querySelectorAll(".tab-button").forEach(btn => btn.classList.remove("active"));
      document.querySelectorAll(".tab-content, .main-container, .community-container, .settings-container").forEach(div => div.classList.remove("active"));

      if (tabId === "main") {
        document.querySelector(".main-container").classList.add("active");
        document.querySelectorAll(".tab-button")[0].classList.add("active");
      } else if (tabId === "community") {
        document.getElementById("community").style.display = "block";
        document.getElementById("main").style.display = "none";
        document.getElementById("settings").style.display = "none";
        document.querySelectorAll(".tab-button")[1].classList.add("active");
        renderPosts();
      } else if (tabId === "settings") {
        document.getElementById("settings").style.display = "block";
        document.getElementById("main").style.display = "none";
        document.getElementById("community").style.display = "none";
        document.querySelectorAll(".tab-button")[2].classList.add("active");
      }
    }

    function openPostModal() {
      document.getElementById("post-modal").style.display = "block";
    }

    function closePostModal() {
      document.getElementById("post-modal").style.display = "none";
    }

    function submitPost() {
      const title = document.getElementById("post-title").value.trim();
      const author = document.getElementById("post-author").value.trim() || "ìµëª…";
      const content = document.getElementById("post-content").value.trim();
      if (!title || !content) {
        alert("ì œëª©ê³¼ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”.");
        return;
      }

      const post = {
        title,
        author,
        content,
        date: new Date().toLocaleString()
      };

      const posts = JSON.parse(localStorage.getItem("communityPosts") || "[]");
      posts.unshift(post);
      localStorage.setItem("communityPosts", JSON.stringify(posts));

      closePostModal();
      renderPosts();
    }

    function renderPosts() {
      const posts = JSON.parse(localStorage.getItem("communityPosts") || "[]");
      const tbody = document.getElementById("post-list-body");
      tbody.innerHTML = "";
      posts.forEach((post, i) => {
        const row = document.createElement("tr");
        row.innerHTML = `
          <td>${post.title}</td>
          <td>${post.author}</td>
          <td>${post.date}</td>
          <td><button onclick="alert(\`${post.content.replace(/`/g, "\\`")}\`)">ë³´ê¸°</button></td>
        `;
        tbody.appendChild(row);
      });
    }

    window.onload = renderPosts;
  </script>
</body>
</html>

