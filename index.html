<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>School Talk Talk</title>
    <style>
        body {
            font-family: 'Malgun Gothic', sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            min-height: 100vh;
            background-color: #ffffff;
            color: #333333;
            transition: all 0.3s ease;
            font-size: 16px;
        }
        body.dark-mode {
            background-color: #1a1a1a;
            color: #ffffff;
        }
        .vertical-tabs {
            width: 60px;
            background-color: #f5f5f5;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-top: 20px;
            transition: background-color 0.3s;
        }
        body.dark-mode .vertical-tabs {
            background-color: #2b2b2b;
        }
        .tab-button {
            width: 40px;
            height: 40px;
            margin-bottom: 10px;
            border: none;
            border-radius: 8px;
            background-color: #e0e0e0;
            color: #333333;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s, transform 0.2s;
        }
        body.dark-mode .tab-button {
            background-color: #3f3f3f;
            color: #ffffff;
        }
        .tab-button:hover {
            background-color: #d0d0d0;
            transform: scale(1.05);
        }
        body.dark-mode .tab-button:hover {
            background-color: #4f4f4f;
        }
        .tab-button.active {
            background-color: #0078d4;
            color: #ffffff;
        }
        .content-area {
            flex: 1;
            padding: 20px;
            background-color: #f5f5f5;
            transition: background-color 0.3s;
        }
        body.dark-mode .content-area {
            background-color: #2b2b2b;
        }
        .main-container, .community-container, .post-detail-container, .settings-container {
            display: none;
            max-width: 1200px;
            margin: 0 auto;
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: background-color 0.3s;
        }
        body.dark-mode .main-container,
        body.dark-mode .community-container,
        body.dark-mode .post-detail-container,
        body.dark-mode .settings-container {
            background-color: #333333;
        }
        .main-container.active,
        .community-container.active,
        .post-detail-container.active,
        .settings-container.active {
            display: block;
        }
        .settings-profile {
            padding: 20px;
            background-color: #fff;
            border-bottom: 1px solid #eee;
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 10px;
            transition: background-color 0.3s, color 0.3s;
        }
        body.dark-mode .settings-profile {
            background-color: #333;
            color: #fff;
        }
        .profile-image {
            width: 60px;
            height: 60px;
            background-color: #e1e1e1;
            border-radius: 50%;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }
        .profile-image input[type="file"] {
            display: none;
        }
        .profile-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .profile-info h2, .profile-info p {
            color: inherit;
            margin: 0;
        }
        .settings-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .settings-item {
            padding: 16px 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        body.dark-mode .settings-item {
            border-bottom: 1px solid #444;
        }
        .settings-item:hover {
            background-color: #f0f0f0;
        }
        body.dark-mode .settings-item:hover {
            background-color: #3a3a3a;
        }
        .settings-item .accordion-toggle {
            color: #666;
            font-size: 1.2em;
            transition: transform 0.3s, color 0.3s;
        }
        body.dark-mode .settings-item .accordion-toggle {
            color: #aaa;
        }
        .settings-item.active .accordion-toggle {
            transform: rotate(90deg);
        }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            background-color: #f9f9f9;
            padding: 0 20px;
        }
        body.dark-mode .accordion-content {
            background-color: #2a2a2a;
        }
        .accordion-content.active {
            padding: 15px 20px;
        }
        .accordion-content ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .accordion-content li {
            padding: 12px 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: background-color 0.2s;
        }
        .accordion-content li:hover {
            background-color: #f0f0f0;
        }
        body.dark-mode .accordion-content li:hover {
            background-color: #3a3a3a;
        }
        .action-button, .edit-button, .font-size-button, .reset-button, .post-form-button, .back-button, .delete-account {
            padding: 10px 16px;
            border: none;
            border-radius: 8px;
            background-color: #0078d4;
            color: #fff;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.2s, transform 0.2s, box-shadow 0.2s;
        }
        body.dark-mode .action-button,
        body.dark-mode .edit-button,
        body.dark-mode .font-size-button,
        body.dark-mode .reset-button,
        body.dark-mode .post-form-button,
        body.dark-mode .back-button,
        body.dark-mode .delete-account {
            background-color: #4a90e2;
        }
        .action-button:hover, .edit-button:hover, .font-size-button:hover, .reset-button:hover, .post-form-button:hover, .back-button:hover, .delete-account:hover {
            background-color: #005ea2;
            transform: scale(1.02);
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        body.dark-mode .action-button:hover,
        body.dark-mode .edit-button:hover,
        body.dark-mode .font-size-button:hover,
        body.dark-mode .reset-button:hover,
        body.dark-mode .post-form-button:hover,
        body.dark-mode .back-button:hover,
        body.dark-mode .delete-account:hover {
            background-color: #357abd;
        }
        .action-button:active, .edit-button:active, .font-size-button:active, .reset-button:active, .post-form-button:active, .back-button:active, .delete-account:active {
            transform: translateY(1px);
        }
        .edit-button {
            background: none;
            color: #0078d4;
            font-size: 1.1em;
        }
        body.dark-mode .edit-button {
            color: #4a90e2;
        }
        .font-size-button, .reset-button {
            background-color: #e0e0e0;
            color: #333;
        }
        body.dark-mode .font-size-button,
        body.dark-mode .reset-button {
            background-color: #3f3f3f;
            color: #fff;
        }
        .delete-account {
            background-color: #d32f2f;
        }
        body.dark-mode .delete-account {
            background-color: #b71c1c;
        }
        .delete-account:hover {
            background-color: #b71c1c;
        }
        body.dark-mode .delete-account:hover {
            background-color: #8e0000;
        }
        .community-container {
            padding: 20px;
        }
        .community-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .post-form {
            background-color: #fff;
            padding: 15px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        body.dark-mode .post-form {
            background-color: #333;
        }
        .post-form input, .post-form textarea {
            width: 100%;
            padding: 12px;
            margin-bottom: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-family: inherit;
            color: inherit;
            background-color: #fff;
            transition: border-color 0.3s, background-color 0.3s;
        }
        body.dark-mode .post-form input,
        body.dark-mode .post-form textarea {
            border-color: #555;
            background-color: #2a2a2a;
        }
        .post-form textarea {
            resize: vertical;
            min-height: 120px;
        }
        .post-list table {
            width: 100%;
            border-collapse: collapse;
        }
        .post-list th, .post-list td {
            padding: 14px;
            border-bottom: 1px solid #eee;
            text-align: left;
            transition: background-color 0.3s;
        }
        body.dark-mode .post-list th,
        body.dark-mode .post-list td {
            border-bottom: 1px solid #444;
        }
        .post-list th {
            background-color: #f5f5f5;
            font-weight: bold;
        }
        body.dark-mode .post-list th {
            background-color: #333;
        }
        .post-list tr:hover {
            background-color: #f0f0f0;
            cursor: pointer;
        }
        body.dark-mode .post-list tr:hover {
            background-color: #3a3a3a;
        }
        .post-detail-container {
            padding: 20px;
        }
        .post-detail-content {
            background-color: #fff;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        body.dark-mode .post-detail-content {
            background-color: #333;
        }
        .post-detail-content h2 {
            margin-top: 0;
            font-size: 1.8em;
        }
        .post-detail-content .meta {
            color: #666;
            margin-bottom: 20px;
            font-size: 0.9em;
        }
        body.dark-mode .post-detail-content .meta {
            color: #aaa;
        }
        .post-detail-content .content {
            white-space: pre-wrap;
            font-size: 1.1em;
        }
        .main-container {
            display: flex;
            gap: 20px;
        }
        .left-container, .right-container {
            flex: 1;
            min-width: 400px;
        }
        .right-container {
            padding-top: 60px;
        }
        .top-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            align-items: center;
            height: 40px;
        }
        .search-container {
            position: relative;
            flex: 1;
        }
        #search-input {
            width: 100%;
            padding: 8px;
            font-size: 14px;
            border-radius: 8px;
            border: 1px solid #ddd;
        }
        #class-select {
            padding: 8px;
            font-size: 14px;
            border-radius: 8px;
            border: 1px solid #ddd;
        }
        #school-list {
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;
            max-height: 300px;
            overflow-y: auto;
            background: white;
            border: 1px solid #ddd;
            border-top: none;
            border-radius: 0 0 8px 8px;
            z-index: 1000;
        }
        #school-list a {
            display: block;
            padding: 8px;
            text-decoration: none;
            color: black;
        }
        #school-list a:hover {
            background-color: #f0f0f0;
        }
        .timetable, .calendar {
            width: 100%;
            border-collapse: collapse;
            table-layout: fixed;
            height: 700px;
        }
        .timetable thead th, .calendar thead th {
            height: 40px;
            padding: 8px;
            text-align: center;
            background-color: #f5f5f5;
            border: 1px solid #ddd;
            font-weight: bold;
            transition: background-color 0.3s, color 0.3s, border-color 0.3s;
        }
        body.dark-mode .timetable thead th,
        body.dark-mode .calendar thead th {
            background-color: #333;
            color: #fff;
            border-color: #555;
        }
        .timetable tbody td {
            height: calc((700px - 40px) / 7);
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
            transition: background-color 0.3s, color 0.3s, border-color 0.3s;
        }
        body.dark-mode .timetable tbody td {
            background-color: #2a2a2a;
            color: #fff;
            border-color: #444;
        }
        .calendar tbody td {
            height: calc((700px - 40px) / 6);
            border: 1px solid #ddd;
            vertical-align: top;
            width: calc(100% / 7);
            padding: 0;
            position: relative;
            transition: background-color 0.3s, color 0.3s, border-color 0.3s;
        }
        body.dark-mode .calendar tbody td {
            background-color: #2a2a2a;
            color: #fff;
            border-color: #444;
        }
        .calendar .date-number {
            padding: 5px;
            font-weight: bold;
            background-color: #f5f5f5;
            margin-bottom: 5px;
            transition: background-color 0.3s, color 0.3s;
        }
        body.dark-mode .calendar .date-number {
            background-color: #333;
            color: #fff;
        }
        .calendar .memo {
            padding: 5px;
            height: calc(100% - 30px);
            width: 100%;
            box-sizing: border-box;
            border: none;
            resize: none;
            font-family: inherit;
            font-size: inherit;
            background: transparent;
            color: inherit;
            transition: background-color 0.3s, color 0.3s;
        }
        .calendar .memo:focus {
            outline: none;
            background-color: #f8f8f8;
        }
        body.dark-mode .calendar .memo:focus {
            background-color: #333;
        }
        .timetable td[contenteditable="true"] {
            background-color: #fff;
            cursor: text;
        }
        body.dark-mode .timetable td[contenteditable="true"] {
            background-color: #2a2a2a;
            color: #fff;
        }
        .timetable td[contenteditable="true"]:hover {
            background-color: #f8f8f8;
        }
        body.dark-mode .timetable td[contenteditable="true"]:hover {
            background-color: #333;
        }
        .timetable td[contenteditable="true"]:focus {
            outline: 2px solid #007bff;
            outline-offset: -2px;
        }
        .profile-edit, .location-controls, .account-section {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
        }
        .edit-input, .account-section input {
            border: 1px solid #ddd;
            padding: 8px;
            border-radius: 8px;
            width: 200px;
            background-color: #fff;
            color: #333;
        }
        body.dark-mode .edit-input,
        body.dark-mode .account-section input {
            background-color: #2a2a2a;
            color: #fff;
            border-color: #555;
        }
        .font-size-control {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
        }
        .terms-container, .faq-container, .contact-container, .guide-container {
            max-height: 400px;
            overflow-y: auto;
            padding: 20px;
            background-color: #f9f9f9;
            border-radius: 8px;
            margin: 10px 0;
        }
        body.dark-mode .terms-container,
        body.dark-mode .faq-container,
        body.dark-mode .contact-container,
        body.dark-mode .guide-container {
            background-color: #2a2a2a;
        }
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .toggle-slider {
            background-color: #0078d4;
        }
        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }
        .language-select, .notification-sound {
            padding: 8px;
            border-radius: 8px;
            border: 1px solid #ddd;
            background-color: white;
            color: inherit;
        }
        body.dark-mode .language-select,
        body.dark-mode .notification-sound {
            background-color: #333;
            border-color: #555;
        }
        /* 반응형 디자인 */
        @media screen and (max-width: 768px) {
            body {
                flex-direction: column;
                padding-bottom: 100px;
            }
            .vertical-tabs {
                position: fixed;
                bottom: 0;
                left: 0;
                width: 100%;
                height: 80px;
                background-color: #f5f5f5;
                display: flex;
                flex-direction: row;
                justify-content: space-around;
                align-items: center;
                padding: 0;
                z-index: 1000;
                box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            }
            body.dark-mode .vertical-tabs {
                background-color: #2b2b2b;
                box-shadow: 0 -2px 10px rgba(0,0,0,0.3);
            }
            .tab-button {
                width: 60px;
                height: 60px;
                margin: 0;
                border-radius: 50%;
                font-size: 24px;
            }
            .content-area {
                padding: 10px;
                padding-bottom: 90px;
            }
            .main-container {
                flex-direction: column;
            }
            .left-container, .right-container {
                min-width: 100%;
                margin-bottom: 20px;
            }
            .top-controls {
                flex-direction: column;
                gap: 10px;
                height: auto;
            }
            .search-container {
                width: 100%;
            }
            #class-select {
                width: 100%;
                padding: 10px;
            }
            .timetable, .calendar {
                height: auto;
                min-height: 300px;
            }
            .timetable tbody td {
                height: 50px;
                font-size: 12px;
                padding: 4px;
            }
            .calendar tbody td {
                height: 80px;
            }
            .settings-container, .community-container, .post-detail-container {
                max-width: 100%;
            }
            .post-list th:nth-child(4), .post-list td:nth-child(4) {
                display: none;
            }
            .post-form input, .post-form textarea {
                font-size: 14px;
            }
            .mobile-bottom-tabs {
                display: flex;
                position: fixed;
                bottom: 0;
                left: 0;
                width: 100%;
                height: 80px;
                background-color: #f5f5f5;
                flex-direction: row;
                justify-content: space-around;
                align-items: center;
                z-index: 1000;
                box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            }
            body.dark-mode .mobile-bottom-tabs {
                background-color: #2b2b2b;
                box-shadow: 0 -2px 10px rgba(0,0,0,0.3);
            }
            .mobile-tab-button {
                width: 60px;
                height: 60px;
                border-radius: 50%;
                font-size: 24px;
                background-color: #e0e0e0;
                color: #333333;
                border: none;
                cursor: pointer;
                transition: background-color 0.2s, transform 0.2s;
            }
            body.dark-mode .mobile-tab-button {
                background-color: #3f3f3f;
                color: #ffffff;
            }
            .mobile-tab-button:hover {
                background-color: #d0d0d0;
                transform: scale(1.05);
            }
            body.dark-mode .mobile-tab-button:hover {
                background-color: #4f4f4f;
            }
            .mobile-tab-button.active {
                background-color: #0078d4;
                color: #ffffff;
            }
        }
        @media screen and (min-width: 769px) and (max-width: 1024px) {
            .main-container {
                flex-direction: column;
            }
            .left-container, .right-container {
                min-width: 100%;
                margin-bottom: 20px;
            }
            .timetable, .calendar {
                height: 500px;
            }
            .settings-container, .community-container, .post-detail-container {
                max-width: 90%;
            }
        }
        @media screen and (min-width: 1025px) {
            .main-container {
                flex-direction: row;
            }
            .left-container, .right-container {
                min-width: 400px;
            }
            .timetable, .calendar {
                height: 700px;
            }
        }
        .mobile-bottom-tabs {
            display: none;
        }
        @media screen and (max-width: 768px) {
            .mobile-bottom-tabs {
                display: flex;
            }
            .vertical-tabs {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="vertical-tabs">
        <button class="tab-button active" onclick="switchTab('main')">📅</button>
        <button class="tab-button" onclick="switchTab('community')">📋</button>
        <button class="tab-button" onclick="switchTab('settings')">⚙️</button>
    </div>
    <div class="content-area">
        <div class="main-container active">
            <div class="left-container">
                <div class="top-controls">
                    <div class="search-container">
                        <input type="text" id="search-input" placeholder="학교 검색" oninput="filterSchools()">
                        <div id="school-list"></div>
                    </div>
                    <select id="class-select" onchange="switchClass(this.value)">
                        <option value="1반">1반</option>
                        <option value="2반">2반</option>
                        <option value="3반">3반</option>
                        <option value="4반">4반</option>
                    </select>
                </div>
                <table class="timetable">
                    <thead>
                        <tr>
                            <th>교시</th>
                            <th>월</th>
                            <th>화</th>
                            <th>수</th>
                            <th>목</th>
                            <th>금</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>1교시</td><td contenteditable="true"></td><td contenteditable="true"></td><td contenteditable="true"></td><td contenteditable="true"></td><td contenteditable="true"></td></tr>
                        <tr><td>2교시</td><td contenteditable="true"></td><td contenteditable="true"></td><td contenteditable="true"></td><td contenteditable="true"></td><td contenteditable="true"></td></tr>
                        <tr><td>3교시</td><td contenteditable="true"></td><td contenteditable="true"></td><td contenteditable="true"></td><td contenteditable="true"></td><td contenteditable="true"></td></tr>
                        <tr><td>4교시</td><td contenteditable="true"></td><td contenteditable="true"></td><td contenteditable="true"></td><td contenteditable="true"></td><td contenteditable="true"></td></tr>
                        <tr><td>5교시</td><td contenteditable="true"></td><td contenteditable="true"></td><td contenteditable="true"></td><td contenteditable="true"></td><td contenteditable="true"></td></tr>
                        <tr><td>6교시</td><td contenteditable="true"></td><td contenteditable="true"></td><td contenteditable="true"></td><td contenteditable="true"></td><td contenteditable="true"></td></tr>
                        <tr><td>7교시</td><td contenteditable="true"></td><td contenteditable="true"></td><td contenteditable="true"></td><td contenteditable="true"></td><td contenteditable="true"></td></tr>
                    </tbody>
                </table>
            </div>
            <div class="right-container">
                <table class="calendar">
                    <thead>
                        <tr>
                            <th>일</th><th>월</th><th>화</th><th>수</th><th>목</th><th>금</th><th>토</th>
                        </tr>
                    </thead>
                    <tbody id="calendar-body"></tbody>
                </table>
            </div>
        </div>
        <div class="community-container">
            <div class="community-header">
                <h2>커뮤니티</h2>
                <button class="post-form-button" onclick="showPostForm()">글쓰기</button>
            </div>
            <div class="post-form" style="display: none;">
                <input type="text" id="post-title" placeholder="제목">
                <textarea id="post-content" placeholder="내용"></textarea>
                <button class="action-button" onclick="submitPost()">게시</button>
            </div>
            <div class="post-list">
                <table>
                    <thead>
                        <tr>
                            <th style="width: 50%;">제목</th>
                            <th style="width: 20%;">작성자</th>
                            <th style="width: 20%;">작성일</th>
                            <th style="width: 10%;">조회수</th>
                        </tr>
                    </thead>
                    <tbody id="post-list-body"></tbody>
                </table>
            </div>
        </div>
        <div class="post-detail-container">
            <button class="back-button" onclick="switchTab('community')">뒤로</button>
            <div class="post-detail-content">
                <h2 id="detail-title"></h2>
                <div class="meta" id="detail-meta"></div>
                <div class="content" id="detail-content"></div>
            </div>
        </div>
        <div class="settings-container">
            <div class="settings-profile">
                <div class="profile-image" onclick="document.getElementById('profile-image-input').click()">
                    <input type="file" id="profile-image-input" accept="image/*" onchange="handleImageUpload(event)">
                    <img id="profile-preview" src="" alt="프로필 이미지">
                </div>
                <div class="profile-info">
                    <h2>
                        <span id="user-name">사용자 이름</span>
                        <button class="edit-button" onclick="editField('user-name')">✏️</button>
                    </h2>
                    <p>
                        <span id="user-email">user@example.com</span>
                        <button class="edit-button" onclick="editField('user-email')">✏️</button>
                    </p>
                </div>
            </div>
            <div class="main-settings">
                <ul class="settings-list">
                    <li class="settings-item" data-section="notifications">
                        🔔 알림 설정
                        <i class="accordion-toggle">›</i>
                        <div class="accordion-content" id="notifications-content">
                            <ul>
                                <li>
                                    푸시 알림
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="push-notification" onchange="toggleNotification('push')">
                                        <span class="toggle-slider"></span>
                                    </label>
                                </li>
                                <li>
                                    이메일 알림
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="email-notification" onchange="toggleNotification('email')">
                                        <span class="toggle-slider"></span>
                                    </label>
                                </li>
                                <li>
                                    시간표 변경 알림
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="timetable-notification" onchange="toggleNotification('timetable')">
                                        <span class="toggle-slider"></span>
                                    </label>
                                </li>
                                <li>
                                    시험 일정 알림
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="exam-notification" onchange="toggleNotification('exam')">
                                        <span class="toggle-slider"></span>
                                    </label>
                                </li>
                                <li>
                                    알림음 설정
                                    <select class="notification-sound" onchange="changeNotificationSound(this.value)">
                                        <option value="default">기본 알림음</option>
                                        <option value="bell">벨 소리</option>
                                        <option value="chime">차임벨</option>
                                        <option value="ding">딩동</option>
                                    </select>
                                </li>
                            </ul>
                        </div>
                    </li>
                    <li class="settings-item" data-section="theme">
                        🎨 테마 설정
                        <i class="accordion-toggle">›</i>
                        <div class="accordion-content" id="theme-content">
                            <ul>
                                <li>
                                    다크모드 전환
                                    <button class="action-button" onclick="toggleDarkMode()">전환</button>
                                </li>
                                <li>
                                    <div class="font-size-control">
                                        폰트 크기
                                        <button class="font-size-button" onclick="changeFontSize(-1)">A-</button>
                                        <button class="font-size-button" onclick="changeFontSize(1)">A+</button>
                                        <button class="reset-button" onclick="resetFontSize()">초기화</button>
                                    </div>
                                </li>
                                <li>
                                    언어 설정
                                    <select class="language-select" onchange="changeLanguage(this.value)">
                                        <option value="ko">한국어</option>
                                        <option value="en">English</option>
                                        <option value="ja">日本語</option>
                                        <option value="zh">中文</option>
                                    </select>
                                </li>
                            </ul>
                        </div>
                    </li>
                    <li class="settings-item" data-section="data">
                        💾 데이터 관리
                        <i class="accordion-toggle">›</i>
                        <div class="accordion-content" id="data-content">
                            <ul>
                                <li>
                                    데이터 내보내기
                                    <button class="action-button" onclick="exportData()">내보내기</button>
                                </li>
                                <li>
                                    데이터 가져오기
                                    <button class="action-button" onclick="document.getElementById('import-file').click()">가져오기</button>
                                    <input type="file" id="import-file" accept=".json" style="display: none;" onchange="importData()">
                                </li>
                                <li>
                                    데이터 초기화
                                    <button class="action-button" onclick="resetData()">초기화</button>
                                </li>
                                <li>
                                    자동 저장
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="auto-save" onchange="toggleAutoSave()">
                                        <span class="toggle-slider"></span>
                                    </label>
                                </li>
                            </ul>
                        </div>
                    </li>
                    <li class="settings-item" data-section="sync">
                        ☁️ 백업 및 동기화
                        <i class="accordion-toggle">›</i>
                        <div class="accordion-content" id="sync-content">
                            <ul>
                                <li>
                                    자동 백업
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="auto-backup" onchange="toggleAutoBackup()">
                                        <span class="toggle-slider"></span>
                                    </label>
                                </li>
                                <li>
                                    수동 백업
                                    <button class="action-button" onclick="manualBackup()">백업</button>
                                </li>
                                <li>
                                    클라우드 동기화
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="cloud-sync" onchange="toggleCloudSync()">
                                        <span class="toggle-slider"></span>
                                    </label>
                                </li>
                                <li>
                                    마지막 동기화: <span id="last-sync">-</span>
                                </li>
                            </ul>
                        </div>
                    </li>
                    <li class="settings-item" data-section="privacy">
                        🔒 개인정보 설정
                        <i class="accordion-toggle">›</i>
                        <div class="accordion-content" id="privacy-content">
                            <ul>
                                <li>
                                    개인정보 수집·이용 동의서
                                    <button class="action-button" onclick="showTerms()">보기</button>
                                </li>
                                <li>
                                    위치 정보 설정
                                    <button class="action-button" onclick="showLocationSettings()">설정</button>
                                </li>
                                <li>
                                    계정 정보 관리
                                    <button class="action-button" onclick="showAccountSettings()">관리</button>
                                </li>
                            </ul>
                        </div>
                    </li>
                    <li class="settings-item" data-section="help">
                        ❓ 도움말
                        <i class="accordion-toggle">›</i>
                        <div class="accordion-content" id="help-content">
                            <ul>
                                <li>
                                    자주 찾는 도움말
                                    <button class="action-button" onclick="showFAQ()">보기</button>
                                </li>
                                <li>
                                    문의하기
                                    <button class="action-button" onclick="showContact()">문의</button>
                                </li>
                                <li>
                                    사용 가이드
                                    <button class="action-button" onclick="showUserGuide()">가이드</button>
                                </li>
                                <li>
                                    버전 정보: v1.0.0
                                </li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="mobile-bottom-tabs">
        <button class="mobile-tab-button active" onclick="switchTab('main')">📅</button>
        <button class="mobile-tab-button" onclick="switchTab('community')">📋</button>
        <button class="mobile-tab-button" onclick="switchTab('settings')">⚙️</button>
    </div>
    <script>
        // 번역 데이터
        const translations = {
            ko: {
                timetable: "시간표",
                community: "커뮤니티",
                settings: "설정",
                searchPlaceholder: "학교 검색",
                classSelect: "반 선택",
                notifications: "알림 설정",
                theme: "테마 설정",
                data: "데이터 관리",
                sync: "백업 및 동기화",
                privacy: "개인정보 설정",
                help: "도움말",
                pushNotification: "푸시 알림",
                emailNotification: "이메일 알림",
                timetableNotification: "시간표 변경 알림",
                examNotification: "시험 일정 알림",
                notificationSound: "알림음 설정",
                defaultSound: "기본 알림음",
                bellSound: "벨 소리",
                chimeSound: "차임벨",
                dingSound: "딩동",
                darkMode: "다크모드 전환",
                fontSize: "폰트 크기",
                language: "언어 설정",
                reset: "초기화",
                exportData: "데이터 내보내기",
                importData: "데이터 가져오기",
                resetData: "데이터 초기화",
                autoSave: "자동 저장",
                confirmReset: "모든 데이터를 초기화하시겠습니까? 이 작업은 되돌릴 수 없습니다.",
                autoBackup: "자동 백업",
                manualBackup: "수동 백업",
                cloudSync: "클라우드 동기화",
                lastSync: "마지막 동기화",
                privacyPolicy: "개인정보 수집·이용 동의서",
                locationSettings: "위치 정보 설정",
                accountSettings: "계정 정보 관리",
                faq: "자주 찾는 도움말",
                contact: "문의하기",
                userGuide: "사용 가이드",
                version: "버전 정보",
                communityHeader: "커뮤니티",
                writePost: "글쓰기",
                postTitle: "제목",
                postContent: "내용",
                submitPost: "게시",
                postListTitle: "제목",
                postListAuthor: "작성자",
                postListDate: "작성일",
                postListViews: "조회수",
                back: "뒤로",
                locationEnabled: "위치 정보 사용",
                locationNote: "※ 위치 정보는 사용자의 동의 하에 수집되며, 서비스 제공 목적으로만 사용됩니다.",
                accountName: "이름",
                accountEmail: "이메일",
                passwordChange: "비밀번호 변경",
                currentPassword: "현재 비밀번호",
                newPassword: "새 비밀번호",
                confirmPassword: "새 비밀번호 확인",
                deleteAccount: "계정 삭제",
                confirmDelete: "계정을 삭제하면 모든 데이터가 영구적으로 삭제되며 복구할 수 없습니다. 계속하시겠습니까?"
            },
            en: {
                timetable: "Timetable",
                community: "Community",
                settings: "Settings",
                searchPlaceholder: "Search school",
                classSelect: "Select class",
                notifications: "Notifications",
                theme: "Theme",
                data: "Data Management",
                sync: "Backup & Sync",
                privacy: "Privacy",
                help: "Help",
                pushNotification: "Push Notifications",
                emailNotification: "Email Notifications",
                timetableNotification: "Timetable Change Alerts",
                examNotification: "Exam Schedule Alerts",
                notificationSound: "Notification Sound",
                defaultSound: "Default Sound",
                bellSound: "Bell",
                chimeSound: "Chime",
                dingSound: "Ding",
                darkMode: "Dark Mode",
                fontSize: "Font Size",
                language: "Language",
                reset: "Reset",
                exportData: "Export Data",
                importData: "Import Data",
                resetData: "Reset Data",
                autoSave: "Auto Save",
                confirmReset: "Are you sure you want to reset all data? This action cannot be undone.",
                autoBackup: "Auto Backup",
                manualBackup: "Manual Backup",
                cloudSync: "Cloud Sync",
                lastSync: "Last Sync",
                privacyPolicy: "Privacy Policy",
                locationSettings: "Location Settings",
                accountSettings: "Account Settings",
                faq: "FAQ",
                contact: "Contact",
                userGuide: "User Guide",
                version: "Version",
                communityHeader: "Community",
                writePost: "Write Post",
                postTitle: "Title",
                postContent: "Content",
                submitPost: "Post",
                postListTitle: "Title",
                postListAuthor: "Author",
                postListDate: "Date",
                postListViews: "Views",
                back: "Back",
                locationEnabled: "Use Location",
                locationNote: "※ Location data is collected with user consent and used only for service provision.",
                accountName: "Name",
                accountEmail: "Email",
                passwordChange: "Change Password",
                currentPassword: "Current Password",
                newPassword: "New Password",
                confirmPassword: "Confirm New Password",
                deleteAccount: "Delete Account",
                confirmDelete: "Deleting your account will permanently remove all data and cannot be undone. Continue?"
            },
            ja: {
                timetable: "時間割",
                community: "コミュニティ",
                settings: "設定",
                searchPlaceholder: "学校を検索",
                classSelect: "クラスを選択",
                notifications: "通知設定",
                theme: "テーマ設定",
                data: "データ管理",
                sync: "バックアップと同期",
                privacy: "プライバシー設定",
                help: "ヘルプ",
                pushNotification: "プッシュ通知",
                emailNotification: "メール通知",
                timetableNotification: "時間割変更通知",
                examNotification: "試験日程通知",
                notificationSound: "通知音設定",
                defaultSound: "デフォルト音",
                bellSound: "ベル音",
                chimeSound: "チャイム音",
                dingSound: "ディング音",
                darkMode: "ダークモード",
                fontSize: "フォントサイズ",
                language: "言語設定",
                reset: "リセット",
                exportData: "データのエクスポート",
                importData: "データのインポート",
                resetData: "データのリセット",
                autoSave: "自動保存",
                confirmReset: "すべてのデータをリセットしますか？この操作は元に戻せません。",
                autoBackup: "自動バックアップ",
                manualBackup: "手動バックアップ",
                cloudSync: "クラウド同期",
                lastSync: "最終同期",
                privacyPolicy: "プライバシーポリシー",
                locationSettings: "位置情報設定",
                accountSettings: "アカウント設定",
                faq: "よくある質問",
                contact: "お問い合わせ",
                userGuide: "ユーザーガイド",
                version: "バージョン情報",
                communityHeader: "コミュニティ",
                writePost: "投稿する",
                postTitle: "タイトル",
                postContent: "内容",
                submitPost: "投稿",
                postListTitle: "タイトル",
                postListAuthor: "投稿者",
                postListDate: "投稿日",
                postListViews: "閲覧数",
                back: "戻る",
                locationEnabled: "位置情報の使用",
                locationNote: "※ 位置情報はユーザーの同意のもと収集され、サービス提供目的でのみ使用されます。",
                accountName: "名前",
                accountEmail: "メール",
                passwordChange: "パスワード変更",
                currentPassword: "現在のパスワード",
                newPassword: "新しいパスワード",
                confirmPassword: "新しいパスワードの確認",
                deleteAccount: "アカウント削除",
                confirmDelete: "アカウントを削除すると、すべてのデータが永久に削除され、復元できません。続けますか？"
            },
            zh: {
                timetable: "课程表",
                community: "社区",
                settings: "设置",
                searchPlaceholder: "搜索学校",
                classSelect: "选择班级",
                notifications: "通知设置",
                theme: "主题设置",
                data: "数据管理",
                sync: "备份与同步",
                privacy: "隐私设置",
                help: "帮助",
                pushNotification: "推送通知",
                emailNotification: "邮件通知",
                timetableNotification: "课程表变更通知",
                examNotification: "考试日程通知",
                notificationSound: "通知音设置",
                defaultSound: "默认提示音",
                bellSound: "铃声",
                chimeSound: "钟声",
                dingSound: "叮咚声",
                darkMode: "深色模式",
                fontSize: "字体大小",
                language: "语言设置",
                reset: "重置",
                exportData: "导出数据",
                importData: "导入数据",
                resetData: "重置数据",
                autoSave: "自动保存",
                confirmReset: "确定要重置所有数据吗？此操作无法撤销。",
                autoBackup: "自动备份",
                manualBackup: "手动备份",
                cloudSync: "云同步",
                lastSync: "上次同步",
                privacyPolicy: "隐私政策",
                locationSettings: "位置设置",
                accountSettings: "账户设置",
                faq: "常见问题",
                contact: "联系我们",
                userGuide: "用户指南",
                version: "版本信息",
                communityHeader: "社区",
                writePost: "写帖子",
                postTitle: "标题",
                postContent: "内容",
                submitPost: "发布",
                postListTitle: "标题",
                postListAuthor: "作者",
                postListDate: "日期",
                postListViews: "浏览量",
                back: "返回",
                locationEnabled: "使用位置信息",
                locationNote: "※ 位置信息在用户同意下收集，仅用于服务提供。",
                accountName: "姓名",
                accountEmail: "电子邮件",
                passwordChange: "更改密码",
                currentPassword: "当前密码",
                newPassword: "新密码",
                confirmPassword: "确认新密码",
                deleteAccount: "删除账户",
                confirmDelete: "删除账户将永久删除所有数据，无法恢复。继续吗？"
            }
        };

        // 현재 언어 설정
        let currentLanguage = localStorage.getItem('language') || 'ko';

        // 언어 변경 함수
        function changeLanguage(lang) {
            currentLanguage = lang;
            localStorage.setItem('language', lang);
            updateTranslations();
            const languageSelect = document.querySelector('.language-select');
            if (languageSelect) {
                languageSelect.value = lang;
            }
        }

        // 번역 업데이트 함수
        function updateTranslations() {
            const t = translations[currentLanguage];
            document.querySelector('.tab-button[onclick="switchTab(\'main\')"]').title = t.timetable;
            document.querySelector('.tab-button[onclick="switchTab(\'community\')"]').title = t.community;
            document.querySelector('.tab-button[onclick="switchTab(\'settings\')"]').title = t.settings;
            document.getElementById('search-input').placeholder = t.searchPlaceholder;
            document.querySelector('.community-header h2').textContent = t.communityHeader;
            document.querySelector('.post-form-button').textContent = t.writePost;
            document.getElementById('post-title').placeholder = t.postTitle;
            document.getElementById('post-content').placeholder = t.postContent;
            document.querySelector('.post-form button').textContent = t.submitPost;
            const postListHeaders = document.querySelectorAll('.post-list th');
            postListHeaders[0].textContent = t.postListTitle;
            postListHeaders[1].textContent = t.postListAuthor;
            postListHeaders[2].textContent = t.postListDate;
            postListHeaders[3].textContent = t.postListViews;
            document.querySelector('.back-button').textContent = t.back;

            const settingsItems = document.querySelectorAll('.settings-item');
            settingsItems.forEach(item => {
                const section = item.dataset.section;
                if (section && t[section]) {
                    item.childNodes[1].textContent = ' ' + t[section];
                }
            });

            const notificationsContent = document.getElementById('notifications-content');
            if (notificationsContent) {
                const items = notificationsContent.querySelectorAll('li');
                items[0].childNodes[0].textContent = t.pushNotification;
                items[1].childNodes[0].textContent = t.emailNotification;
                items[2].childNodes[0].textContent = t.timetableNotification;
                items[3].childNodes[0].textContent = t.examNotification;
                items[4].childNodes[0].textContent = t.notificationSound;
                const soundSelect = items[4].querySelector('select');
                soundSelect.options[0].textContent = t.defaultSound;
                soundSelect.options[1].textContent = t.bellSound;
                soundSelect.options[2].textContent = t.chimeSound;
                soundSelect.options[3].textContent = t.dingSound;
            }

            const themeContent = document.getElementById('theme-content');
            if (themeContent) {
                const items = themeContent.querySelectorAll('li');
                items[0].childNodes[0].textContent = t.darkMode;
                items[1].querySelector('.font-size-control').childNodes[0].textContent = t.fontSize;
                items[1].querySelector('.reset-button').textContent = t.reset;
                items[2].childNodes[0].textContent = t.language;
            }

            const dataContent = document.getElementById('data-content');
            if (dataContent) {
                const items = dataContent.querySelectorAll('li');
                items[0].childNodes[0].textContent = t.exportData;
                items[1].childNodes[0].textContent = t.importData;
                items[2].childNodes[0].textContent = t.resetData;
                items[3].childNodes[0].textContent = t.autoSave;
            }

            const syncContent = document.getElementById('sync-content');
            if (syncContent) {
                const items = syncContent.querySelectorAll('li');
                items[0].childNodes[0].textContent = t.autoBackup;
                items[1].childNodes[0].textContent = t.manualBackup;
                items[2].childNodes[0].textContent = t.cloudSync;
                items[3].childNodes[0].textContent = t.lastSync + ': ';
            }

            const privacyContent = document.getElementById('privacy-content');
            if (privacyContent) {
                const items = privacyContent.querySelectorAll('li');
                items[0].childNodes[0].textContent = t.privacyPolicy;
                items[1].childNodes[0].textContent = t.locationSettings;
                items[2].childNodes[0].textContent = t.accountSettings;
            }

            const helpContent = document.getElementById('help-content');
            if (helpContent) {
                const items = helpContent.querySelectorAll('li');
                items[0].childNodes[0].textContent = t.faq;
                items[1].childNodes[0].textContent = t.contact;
                items[2].childNodes[0].textContent = t.userGuide;
                items[3].childNodes[0].textContent = t.version + ': v1.0.0';
            }
        }

        // 커뮤니티 기능
        function showPostForm() {
            const postForm = document.querySelector('.post-form');
            postForm.style.display = postForm.style.display === 'block' ? 'none' : 'block';
        }

        function submitPost() {
            const title = document.getElementById('post-title').value.trim();
            const content = document.getElementById('post-content').value.trim();
            if (!title || !content) {
                alert('제목과 내용을 입력해주세요.');
                return;
            }
            const posts = JSON.parse(localStorage.getItem('posts') || '[]');
            const newPost = {
                id: Date.now(),
                title,
                content,
                author: document.getElementById('user-name').textContent || '익명',
                date: new Date().toISOString().split('T')[0],
                views: 0
            };
            posts.push(newPost);
            localStorage.setItem('posts', JSON.stringify(posts));
            document.getElementById('post-title').value = '';
            document.getElementById('post-content').value = '';
            showPostForm();
            loadPosts();
        }

        function loadPosts() {
            const postListBody = document.getElementById('post-list-body');
            const posts = JSON.parse(localStorage.getItem('posts') || '[]');
            postListBody.innerHTML = '';
            posts.forEach(post => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${post.title}</td>
                    <td>${post.author}</td>
                    <td>${post.date}</td>
                    <td>${post.views}</td>
                `;
                row.onclick = () => showPostDetail(post.id);
                postListBody.appendChild(row);
            });
        }

        function showPostDetail(postId) {
            const posts = JSON.parse(localStorage.getItem('posts') || '[]');
            const post = posts.find(p => p.id === postId);
            if (post) {
                post.views++;
                localStorage.setItem('posts', JSON.stringify(posts));
                document.getElementById('detail-title').textContent = post.title;
                document.getElementById('detail-meta').textContent = `작성자: ${post.author} | 작성일: ${post.date} | 조회수: ${post.views}`;
                document.getElementById('detail-content').textContent = post.content;
                switchTab('post-detail');
            }
        }

        // 페이지 로드 시 초기화
        window.addEventListener('load', function() {
            const savedLanguage = localStorage.getItem('language') || 'ko';
            changeLanguage(savedLanguage);
            loadPosts();
            createCalendar();
            if (localStorage.getItem('darkMode') === 'true') {
                document.body.classList.add('dark-mode');
            }
            const savedFontSize = localStorage.getItem('fontSize');
            if (savedFontSize) {
                document.body.style.fontSize = savedFontSize + 'px';
            }
        });

        // 시간표 및 캘린더
        const schools = [
            "서울고등학교", "부산고등학교", "대구고등학교", "인천고등학교",
            "광주고등학교", "대전고등학교", "울산고등학교", "세종고등학교"
        ];
        const schoolList = document.getElementById('school-list');
        const timetableCells = document.querySelectorAll('.timetable td[contenteditable="true"]');
        let currentClass = "1반";
        let currentSchool = "";
        const timetables = {};

        function selectSchool(school) {
            currentSchool = school;
            if (!timetables[school]) {
                timetables[school] = {
                    "1반": Array(timetableCells.length).fill(""),
                    "2반": Array(timetableCells.length).fill(""),
                    "3반": Array(timetableCells.length).fill(""),
                    "4반": Array(timetableCells.length).fill("")
                };
            }
            loadTimetable();
        }

        function loadTimetable() {
            if (currentSchool && timetables[currentSchool]) {
                timetableCells.forEach((cell, index) => {
                    cell.innerText = timetables[currentSchool][currentClass][index];
                });
            }
        }

        function switchClass(newClass) {
            if (currentSchool) {
                timetableCells.forEach((cell, index) => {
                    timetables[currentSchool][currentClass][index] = cell.innerText;
                });
            }
            currentClass = newClass;
            loadTimetable();
        }

        schools.forEach(school => {
            const option = document.createElement('a');
            option.href = "#";
            option.textContent = school;
            option.onclick = function(e) {
                e.preventDefault();
                document.getElementById("search-input").value = school;
                schoolList.style.display = "none";
                selectSchool(school);
            };
            schoolList.appendChild(option);
        });

        timetableCells.forEach(cell => {
            cell.addEventListener('blur', function() {
                if (currentSchool) {
                    const index = Array.from(timetableCells).indexOf(cell);
                    timetables[currentSchool][currentClass][index] = cell.innerText;
                }
            });
        });

        function filterSchools() {
            const input = document.getElementById("search-input");
            const filter = input.value.toLowerCase();
            const options = schoolList.getElementsByTagName("a");
            if (filter === "") {
                schoolList.style.display = "none";
                return;
            }
            schoolList.style.display = "block";
            let visible = false;
            for (let i = 0; i < options.length; i++) {
                const option = options[i];
                const text = option.textContent || option.innerText;
                if (text.toLowerCase().includes(filter)) {
                    option.style.display = "block";
                    visible = true;
                } else {
                    option.style.display = "none";
                }
            }
            if (!visible) {
                schoolList.style.display = "none";
            }
        }

        function createCalendar(year = new Date().getFullYear(), month = new Date().getMonth()) {
            const calendarBody = document.getElementById('calendar-body');
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const startDay = firstDay.getDay();
            const totalDays = lastDay.getDate();
            let date = 1;
            let calendar = '';
            for (let i = 0; i < 6; i++) {
                let row = '<tr>';
                for (let j = 0; j < 7; j++) {
                    if (i === 0 && j < startDay) {
                        row += '<td><div class="date-number"></div><textarea class="memo"></textarea></td>';
                    } else if (date > totalDays) {
                        row += '<td><div class="date-number"></div><textarea class="memo"></textarea></td>';
                    } else {
                        row += `<td><div class="date-number">${date}</div><textarea class="memo"></textarea></td>`;
                        date++;
                    }
                }
                row += '</tr>';
                calendar += row;
                if (date > totalDays) {
                    break;
                }
            }
            calendarBody.innerHTML = calendar;
        }

        document.getElementById("search-input").addEventListener("focus", function() {
            if (this.value !== "") {
                schoolList.style.display = "block";
            }
        });

        document.getElementById("search-input").addEventListener("blur", function() {
            setTimeout(() => {
                schoolList.style.display = "none";
            }, 200);
        });

        document.querySelectorAll('.timetable td[contenteditable="true"]').forEach(cell => {
            cell.addEventListener('keydown', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                }
            });
            cell.addEventListener('paste', function(e) {
                e.preventDefault();
                const text = (e.originalEvent || e).clipboardData.getData('text/plain');
                document.execCommand('insertText', false, text.replace(/[\r\n]/g, ' '));
            });
        });

        // 탭 전환
        function switchTab(tabName) {
            document.querySelectorAll('.tab-button, .mobile-tab-button').forEach(button => {
                button.classList.remove('active');
            });
            document.querySelector(`.tab-button[onclick="switchTab('${tabName}')"]`).classList.add('active');
            document.querySelectorAll('.main-container, .community-container, .post-detail-container, .settings-container').forEach(container => {
                container.classList.remove('active');
            });
            document.querySelector(`.${tabName}-container`).classList.add('active');
            if (tabName === 'community') {
                loadPosts();
            }
            syncMobileTabs();
        }

        function syncMobileTabs() {
            const desktopTabs = document.querySelectorAll('.tab-button');
            const mobileTabs = document.querySelectorAll('.mobile-tab-button');
            desktopTabs.forEach((tab, index) => {
                if (tab.classList.contains('active')) {
                    mobileTabs[index].classList.add('active');
                } else {
                    mobileTabs[index].classList.remove('active');
                }
            });
        }

        // 설정 관련 함수
        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            localStorage.setItem('darkMode', document.body.classList.contains('dark-mode'));
        }

        function toggleAccordion(section) {
            const item = document.querySelector(`.settings-item[data-section="${section}"]`);
            const content = item.querySelector('.accordion-content');
            const isActive = item.classList.contains('active');
            document.querySelectorAll('.settings-item').forEach(i => {
                i.classList.remove('active');
                const c = i.querySelector('.accordion-content');
                c.classList.remove('active');
                c.style.maxHeight = null;
            });
            if (!isActive) {
                item.classList.add('active');
                content.classList.add('active');
                content.style.maxHeight = content.scrollHeight + 'px';
            }
        }

        document.querySelectorAll('.settings-item').forEach(item => {
            item.addEventListener('click', (e) => {
                if (e.target.closest('.accordion-content') || e.target.tagName === 'BUTTON' || e.target.tagName === 'INPUT' || e.target.tagName === 'SELECT') {
                    return;
                }
                const section = item.dataset.section;
                toggleAccordion(section);
            });
        });

        function changeFontSize(delta) {
            const currentSize = parseInt(getComputedStyle(document.body).fontSize);
            const newSize = Math.max(12, Math.min(24, currentSize + delta));
            document.body.style.fontSize = newSize + 'px';
            localStorage.setItem('fontSize', newSize);
        }

        function resetFontSize() {
            document.body.style.fontSize = '16px';
            localStorage.setItem('fontSize', 16);
        }

        function editField(fieldId) {
            const element = document.getElementById(fieldId);
            const currentValue = element.textContent;
            const input = document.createElement('input');
            input.type = 'text';
            input.value = currentValue;
            input.className = 'edit-input';
            input.onblur = function() {
                element.textContent = input.value || currentValue;
                localStorage.setItem(fieldId, input.value || currentValue);
                input.replaceWith(element);
            };
            input.onkeydown = function(e) {
                if (e.key === 'Enter') {
                    input.blur();
                }
            };
            element.replaceWith(input);
            input.focus();
        }

        function handleImageUpload(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('profile-preview').src = e.target.result;
                    localStorage.setItem('profileImage', e.target.result);
                };
                reader.readAsDataURL(file);
            }
        }

        function toggleNotification(type) {
            localStorage.setItem(`notification-${type}`, document.getElementById(`${type}-notification`).checked);
        }

        function changeNotificationSound(sound) {
            localStorage.setItem('notificationSound', sound);
        }

        function exportData() {
            const data = {
                timetables: JSON.parse(localStorage.getItem('timetables') || '{}'),
                posts: JSON.parse(localStorage.getItem('posts') || '[]'),
                settings: {
                    language: localStorage.getItem('language'),
                    darkMode: localStorage.getItem('darkMode'),
                    fontSize: localStorage.getItem('fontSize'),
                    userName: localStorage.getItem('user-name'),
                    userEmail: localStorage.getItem('user-email'),
                    profileImage: localStorage.getItem('profileImage')
                }
            };
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'schooltalktalk_backup.json';
            a.click();
            URL.revokeObjectURL(url);
        }

        function importData() {
            const file = document.getElementById('import-file').files[0];
            if (!file) {
                alert('파일을 선택해주세요.');
                return;
            }
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    localStorage.setItem('timetables', JSON.stringify(data.timetables || {}));
                    localStorage.setItem('posts', JSON.stringify(data.posts || []));
                    if (data.settings) {
                        localStorage.setItem('language', data.settings.language || 'ko');
                        localStorage.setItem('darkMode', data.settings.darkMode || 'false');
                        localStorage.setItem('fontSize', data.settings.fontSize || '16');
                        localStorage.setItem('user-name', data.settings.userName || '사용자 이름');
                        localStorage.setItem('user-email', data.settings.userEmail || 'user@example.com');
                        localStorage.setItem('profileImage', data.settings.profileImage || '');
                    }
                    alert('데이터 가져오기 성공!');
                    window.location.reload();
                } catch (error) {
                    alert('잘못된 파일 형식입니다.');
                }
            };
            reader.readAsText(file);
        }

        function resetData() {
            if (confirm(translations[currentLanguage].confirmReset)) {
                localStorage.clear();
                window.location.reload();
            }
        }

        function toggleAutoSave() {
            const enabled = document.getElementById('auto-save').checked;
            localStorage.setItem('autoSave', enabled);
            // 실제 구현 시, 자동 저장 로직 추가 가능
        }

        function toggleAutoBackup() {
            const enabled = document.getElementById('auto-backup').checked;
            localStorage.setItem('autoBackup', enabled);
            // 실제 구현 시, 주기적 백업 로직 추가 가능
        }

        function manualBackup() {
            exportData();
        }

        function toggleCloudSync() {
            const enabled = document.getElementById('cloud-sync').checked;
            localStorage.setItem('cloudSync', enabled);
            if (enabled) {
                document.getElementById('last-sync').textContent = new Date().toLocaleString();
                localStorage.setItem('lastSync', new Date().toISOString());
            }
        }

        function showTerms() {
            const termsContent = `
                <div class="terms-container">
                    <h2>${translations[currentLanguage].privacyPolicy}</h2>
                    <p>School Talk Talk은 사용자의 개인정보를 보호하기 위해 최선을 다하고 있습니다.</p>
                    <ul>
                        <li>수집 정보: 이름, 이메일, 프로필 이미지</li>
                        <li>사용 목적: 서비스 제공, 사용자 식별</li>
                        <li>보관 기간: 계정 삭제 시 즉시 파기</li>
                    </ul>
                    <p>자세한 내용은 <a href="https://example.com/terms" target="_blank">여기</a>를 참조하세요.</p>
                </div>
            `;
            const privacyContent = document.getElementById('privacy-content');
            const existingContent = privacyContent.querySelector('.terms-container');
            if (existingContent) {
                existingContent.remove();
            }
            privacyContent.insertAdjacentHTML('beforeend', termsContent);
        }

        function showLocationSettings() {
            const locationContent = `
                <div class="terms-container">
                    <h2>${translations[currentLanguage].locationSettings}</h2>
                    <p>위치 정보를 사용하여 다음과 같은 서비스를 제공합니다:</p>
                    <ul>
                        <li>근처 학교 검색</li>
                        <li>날씨 정보 제공</li>
                        <li>지역별 공지사항</li>
                    </ul>
                    <div class="location-controls">
                        <label class="toggle-switch">
                            <input type="checkbox" id="location-enabled" onchange="toggleLocation()">
                            <span class="toggle-slider"></span>
                        </label>
                        <span>${translations[currentLanguage].locationEnabled}</span>
                    </div>
                    <div class="location-note">
                        <p>${translations[currentLanguage].locationNote}</p>
                        <p>※ 위치 정보 사용을 중지하더라도 기본 서비스 이용에는 제한이 없습니다.</p>
                    </div>
                </div>
            `;
            
            const submenu = document.getElementById('privacy');
            const existingContent = submenu.querySelector('.terms-container');
            if (existingContent) {
                existingContent.remove();
            } else {
                submenu.insertAdjacentHTML('beforeend', locationContent);
            }
        }

        // 계정 정보 관리 표시
        function showAccountSettings() {AccountSettings() {
            const accountContent = `
                <div class="terms-container">
                    <h2>계정 정보 관리</h2>
                    
                    <div class="account-section">
                        <h3>프로필 정보</h3>
                        <div class="profile-edit">
                            <label>이름:</label>
                            <input type="text" id="account-name" value="${document.getElementById('user-name').textContent}">
                            <button class="edit-button" onclick="updateAccountInfo('name')">저장</button>
                        </div>
                        <div class="profile-edit">
                            <label>이메일:</label>
                            <input type="email" id="account-email" value="${document.getElementById('user-email').textContent}">
                            <button class="edit-button" onclick="updateAccountInfo('email')">저장</button>
                        </div>
                    </div>

                    <div class="account-section">
                        <h3>보안 설정</h3>
                        <div class="profile-edit">
                            <label>비밀번호 변경:</label>
                            <input type="password" id="current-password" placeholder="현재 비밀번호">
                            <input type="password" id="new-password" placeholder="새 비밀번호">
                            <input type="password" id="confirm-password" placeholder="새 비밀번호 확인">
                            <button class="edit-button" onclick="changePassword()">변경</button>
                        </div>
                    </div>

                    <div class="account-section">
                        <h3>계정 삭제</h3>
                        <p>계정을 삭제하면 모든 데이터가 영구적으로 삭제되며 복구할 수 없습니다.</p>
                        <button class="delete-account" onclick="deleteAccount()">계정 삭제</button>
                    </div>
                </div>
            `;
            
            const submenu = document.getElementById('privacy');
            const existingContent = submenu.querySelector('.terms-container');
            if (existingContent) {
                existingContent.remove();
            } else {
                submenu.insertAdjacentHTML('beforeend', accountContent);
            }
        }

        // 위치 정보 토글
        function toggleLocation() {
            const checkbox = document.getElementById('location-enabled');
            localStorage.setItem('locationEnabled', checkbox.checked);
            if (checkbox.checked) {
                // 위치 정보 요청
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(
                        function(position) {
                            localStorage.setItem('userLocation', JSON.stringify({
                                latitude: position.coords.latitude,
                                longitude: position.coords.longitude
                            }));
                        },
                        function(error) {
                            console.error('위치 정보를 가져올 수 없습니다:', error);
                        }
                    );
                }
            }
        }

        // 계정 정보 업데이트
        function updateAccountInfo(type) {
            const value = document.getElementById(`account-${type}`).value;
            if (type === 'name') {
                document.getElementById('user-name').textContent = value;
                localStorage.setItem('user-name', value);
            } else if (type === 'email') {
                document.getElementById('user-email').textContent = value;
                localStorage.setItem('user-email', value);
            }
            alert('정보가 업데이트되었습니다.');
        }

        // 비밀번호 변경
        function changePassword() {
            const currentPassword = document.getElementById('current-password').value;
            const newPassword = document.getElementById('new-password').value;
            const confirmPassword = document.getElementById('confirm-password').value;

            if (newPassword !== confirmPassword) {
                alert('새 비밀번호가 일치하지 않습니다.');
                return;
            }

            // 실제로는 서버와 통신하여 비밀번호를 변경해야 함
            alert('비밀번호가 변경되었습니다.');
            document.getElementById('current-password').value = '';
            document.getElementById('new-password').value = '';
            document.getElementById('confirm-password').value = '';
        }

        // 계정 삭제
        function deleteAccount() {
            if (confirm('정말로 계정을 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.')) {
                localStorage.clear();
                location.reload();
            }
        }

        // 모바일 메뉴 토글
        function toggleMobileMenu() {
            // 제거
        }
        
        // 화면 크기 변경 시 레이아웃 조정
        window.addEventListener('resize', function() {
            if (window.innerWidth > 768) {
                const verticalTabs = document.querySelector('.vertical-tabs');
                verticalTabs.classList.remove('active');
            }
        });
        
        // 모바일에서 메뉴 외부 클릭 시 메뉴 닫기 관련 코드 제거
        document.addEventListener('click', function(event) {
            // 제거
        });

        // 모바일 탭 버튼 상태 동기화
        function syncMobileTabs() {
            const desktopTabs = document.querySelectorAll('.tab-button');
            const mobileTabs = document.querySelectorAll('.mobile-tab-button');
            
            desktopTabs.forEach((tab, index) => {
                if (tab.classList.contains('active')) {
                    mobileTabs[index].classList.add('active');
                } else {
                    mobileTabs[index].classList.remove('active');
                }
            });
        }
    </script>
<script>
function openPostModal() {
  // 간단하게 prompt로 처리
  const title = prompt("제목 입력");
  const author = prompt("작성자 이름", "익명");
  const content = prompt("내용 입력");
  if (!title || !content) return;

  const post = {
    title, author, content,
    date: new Date().toLocaleString()
  };

  const posts = JSON.parse(localStorage.getItem("posts") || "[]");
  posts.unshift(post);
  localStorage.setItem("posts", JSON.stringify(posts));
  renderPosts();
}

function renderPosts() {
  const posts = JSON.parse(localStorage.getItem("posts") || "[]");
  const tbody = document.getElementById("post-list-body");
  if (!tbody) return;
  tbody.innerHTML = "";
  posts.forEach(post => {
    const row = document.createElement("tr");
    row.innerHTML = `
      <td>${post.title}</td>
      <td>${post.author}</td>
      <td>${post.date}</td>
      <td><button onclick="alert('${post.content.replace(/'/g, "\\'")}')">보기</button></td>
    `;
    tbody.appendChild(row);
  });
}

window.addEventListener("DOMContentLoaded", renderPosts);
</script>
<script>
function viewPost(index) {
  const posts = JSON.parse(localStorage.getItem("posts") || "[]");
  const post = posts[index];
  if (!post) return;

  document.getElementById("post-view").style.display = "block";
  document.querySelector(".post-list").style.display = "none";

  document.getElementById("view-title").textContent = post.title;
  document.getElementById("view-author").textContent = post.author;
  document.getElementById("view-date").textContent = post.date;
  document.getElementById("view-content").textContent = post.content;
}

function backToList() {
  document.getElementById("post-view").style.display = "none";
  document.querySelector(".post-list").style.display = "table";
}

function toggleSettingDetail(i) {
  const all = document.querySelectorAll(".settings-detail");
  all[i].style.display = (all[i].style.display === "block") ? "none" : "block";
}
</script></body>
</html>
