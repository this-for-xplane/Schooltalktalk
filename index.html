<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>학교 웹 프로젝트</title>
  <style>
    body {
      margin: 0; font-family: 'Malgun Gothic', sans-serif;
      background-color: #f9f9f9;
      color: #333;
    }
    .vertical-tabs {
      display: flex;
      flex-direction: row;
      border-bottom: 1px solid #ccc;
      background-color: #f1f1f1;
    }
    .tab-button {
      flex: 1;
      padding: 1rem;
      background-color: #e0e0e0;
      border: none;
      cursor: pointer;
      font-size: 16px;
    }
    .tab-button.active {
      background-color: #ffffff;
      font-weight: bold;
    }
    .content-area {
      padding: 1rem;
    }
    .tab-content { display: none; }
    .tab-content.active { display: block; }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 1rem;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: center;
    }
    input[type="text"], textarea {
      width: 100%;
      padding: 8px;
      margin-bottom: 10px;
      box-sizing: border-box;
    }
    button {
      padding: 8px 16px;
      background-color: #0078d4;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    button:hover {
      background-color: #005a9e;
    }
    .post {
      border: 1px solid #ccc;
      padding: 10px;
      margin-top: 10px;
      background-color: #fafafa;
    }
    .post h3 {
      margin: 0;
    }
    .settings-list {
      list-style: none;
      padding: 0;
    }
    .settings-list li {
      padding: 10px;
      border-bottom: 1px solid #ddd;
      cursor: pointer;
    }
    .settings-list li:hover {
      background-color: #f0f0f0;
    }
  </style>
</head>
<body>
  <div class="vertical-tabs">
    <button class="tab-button active" onclick="showTab(0)">홈</button>
    <button class="tab-button" onclick="showTab(1)">커뮤니티</button>
    <button class="tab-button" onclick="showTab(2)">설정</button>
  </div>
  <div class="content-area">
    <div class="tab-content active" id="tab-0">
      <h2>시간표</h2>
      <input type="text" id="searchInput" placeholder="시간표 검색">
      <table id="timetable">
        <thead><tr><th>교시</th><th>월</th><th>화</th><th>수</th><th>목</th><th>금</th></tr></thead>
        <tbody>
          <tr><td>1</td><td contenteditable="true">국어</td><td contenteditable="true">수학</td><td contenteditable="true">영어</td><td contenteditable="true">과학</td><td contenteditable="true">사회</td></tr>
          <tr><td>2</td><td contenteditable="true">수학</td><td contenteditable="true">국어</td><td contenteditable="true">체육</td><td contenteditable="true">음악</td><td contenteditable="true">미술</td></tr>
          <tr><td>3</td><td contenteditable="true"></td><td contenteditable="true"></td><td contenteditable="true"></td><td contenteditable="true"></td><td contenteditable="true"></td></tr>
        </tbody>
      </table>
        
      <h2>급식</h2>
      <table>
        <thead><tr><th>요일</th><th>급식 내용</th></tr></thead>
        <tbody>
          <tr><td>월</td><td>김치찌개, 제육볶음</td></tr>
          <tr><td>화</td><td>된장국, 오징어볶음</td></tr>
        </tbody>
      </table>
    </div>
    <div class="tab-content" id="tab-1">
      <h2>커뮤니티</h2>
      <input type="text" id="post-title" placeholder="제목을 입력하세요" />
      <textarea id="post-content" placeholder="내용을 입력하세요"></textarea>
      <button onclick="submitPost()">게시</button>

      <div id="post-list"></div>
    </div>
    <div class="tab-content" id="tab-2">
      <h2>설정</h2>
      <ul class="settings-list">
        <li onclick="alert('푸시 알림 설정')">🔔 푸시 알림</li>
        <li onclick="toggleDarkMode()">🌙 다크 모드</li>
        <li onclick="resetData()">🗑 데이터 초기화</li>
        <li onclick="alert('버전: 1.0.0')">ℹ️ 버전 정보</li>
      </ul>
    </div>
  </div> <!-- content-area 끝 -->

  <script>
    // 탭 전환
    function showTab(index) {
      const tabs = document.querySelectorAll('.tab-content');
      const buttons = document.querySelectorAll('.tab-button');
      tabs.forEach(t => t.classList.remove('active'));
      buttons.forEach(b => b.classList.remove('active'));
      tabs[index].classList.add('active');
      buttons[index].classList.add('active');
    }

    // 다크 모드
    function toggleDarkMode() {
      document.body.classList.toggle('dark');
    }

    // 커뮤니티 localStorage 저장
    function submitPost() {
      const title = document.getElementById("post-title").value.trim();
      const content = document.getElementById("post-content").value.trim();
      if (!title || !content) {
        alert("제목과 내용을 모두 입력하세요.");
        return;
      }

      const post = {
        title: title,
        content: content,
        time: new Date().toLocaleString()
      };

      let posts = JSON.parse(localStorage.getItem("posts") || "[]");
      posts.unshift(post);
      localStorage.setItem("posts", JSON.stringify(posts));

      document.getElementById("post-title").value = "";
      document.getElementById("post-content").value = "";

      renderPosts();
    }

    function renderPosts() {
      const posts = JSON.parse(localStorage.getItem("posts") || "[]");
      const list = document.getElementById("post-list");
      list.innerHTML = "";
      posts.forEach(post => {
        const div = document.createElement("div");
        div.className = "post";
        div.innerHTML = `<h3>${post.title}</h3><p>${post.content}</p><small>${post.time}</small>`;
        list.appendChild(div);
      });
    }

    function resetData() {
      if (confirm("정말 모든 데이터를 삭제할까요?")) {
        localStorage.clear();
        renderPosts();
        alert("초기화 완료");
      }
    }

    // 검색 기능 (시간표)
    document.getElementById("searchInput").addEventListener("input", function () {
      const filter = this.value.toLowerCase();
      const rows = document.querySelectorAll("#timetable tbody tr");
      rows.forEach(row => {
        row.style.display = Array.from(row.cells).some(td => td.textContent.toLowerCase().includes(filter)) ? "" : "none";
      });
    });

    // 초기 게시물 렌더링
    renderPosts();
  </script>
</body>
</html>
